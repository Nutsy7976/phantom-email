<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Compose Anonymous Email - Phantom</title>

  <!-- Your global stylesheet -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

  <header>
    <img src="{{ url_for('static', filename='images/phantom_logo.png') }}" alt="Phantom Mask Logo">
    Anonymous Email by Phantom
  </header>

  <section class="main-section container">
    <div class="left-box">
      <h2>Phantom Features</h2>
      <ul>
        <li>No accounts or signups required</li>
        <li>Minimal logging policy for privacy</li>
        <li>Temporary data handling</li>
        <li>Customizable Reply‑To address</li>
        <li>Encrypted connection (TLS)</li>
        <li>Designed for enhanced anonymity</li>
      </ul>
    </div>

    <div class="form-box">
      <h1 class="form-heading">Compose Anonymous Email</h1>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <ul class="flash-messages">
            {% for category, message in messages %}
              <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}

      <form action="{{ url_for('start_payment') }}" method="post" enctype="multipart/form-data">

        <label for="from_name" class="field-label">Sender Name (Fictitious):</label>
        <input id="from_name" name="from_name" type="text" placeholder="e.g., Concerned Citizen" required>

        <label for="from_email" class="field-label">Sender Email (Reply‑To):</label>
        <input id="from_email" name="from_email" type="email" placeholder="e.g., info@secure.com" required>
        <small style="color: var(--muted-text); font-size:0.8em; display:block; margin-bottom:1rem;">
          This will be set as the Reply‑To address.
        </small>

        <label for="to_email" class="field-label">Recipient’s Email:</label>
        <input id="to_email" name="to_email" type="email" placeholder="Recipient’s email" required>

        <label for="subject" class="field-label">Subject:</label>
        <input id="subject" name="subject" type="text" placeholder="Email Subject" required>

        <label for="message" class="field-label">Message:</label>
        <textarea id="message" name="message" rows="6" placeholder="Your anonymous message..." required></textarea>

        <label for="file1" class="field-label">Optional Attachment 1:</label>
        <input id="file1" name="file1" type="file">

        <label for="file2" class="field-label">Optional Attachment 2:</label>
        <input id="file2" name="file2" type="file">

        <!-- ==== FREE TRIAL CHECKBOX ==== -->
        <div class="free-trial-container" style="margin-bottom:1rem;">
          <input type="checkbox" id="free-trial-checkbox" name="free_trial" value="true">
          <label for="free-trial-checkbox">
            Try 1 <span class="free-trial-highlight" style="color: var(--accent-green); font-weight:bold;">FREE</span> email
          </label>
        </div>
        <!-- ==== END FREE TRIAL CHECKBOX ==== -->

        <!-- CAPTCHA Widget -->
        <div class="cf-turnstile" data-sitekey="{{ turnstile_sitekey }}"></div><br>

        <button type="submit">
          <span>Pay $3.00 USD &amp; Send</span>
        </button>
      </form>
    </div>
  </section>

  {% include 'footer.html' %}
</body>
</html>
